import{d as ca,e as ia,g as fa,f as la}from"../chunks/BbA3lQ_k.js";import{g as va,a as da}from"../chunks/ClbvkBdK.js";import{e as ua}from"../chunks/DKyf5C_J.js";import"../chunks/DsnmJJEf.js";import{aT as ba,b as ma,h as T,a as ha,aU as _a,p as k,a0 as ga,T as pa,aw as ka,aV as Ca,ad as xa,as as V,ag as y,ah as v,ai as Sa,aW as w,aX as Y,ae as g,d as c,af as q,al as x,aj as S,aY as l,am as j,ak as Aa}from"../chunks/7pJ4Fi5V.js";import{d as Da,s as I,e as ya}from"../chunks/d3KPzBx3.js";import{i as C}from"../chunks/C_T3Iigg.js";import{B as wa}from"../chunks/COMbPKET.js";import{r as ja,s as Ia}from"../chunks/BGlZugMO.js";import{r as G}from"../chunks/DGcfdHsh.js";import{a as Ta,g as Ma}from"../chunks/DMrbCZc2.js";function Ea(a,e,r){T&&ha();var t=new wa(a),n=!ba();ma(()=>{var o=e();n&&o!==null&&typeof o=="object"&&(o={}),t.ensure(o,r)})}function H(a,e=!1){var r=e?" !important;":";",t="";for(var n in a){var o=a[n];o!=null&&o!==""&&(t+=" "+n+": "+o+r)}return t}function Oa(a,e){if(e){var r="",t,n;return Array.isArray(e)?(t=e[0],n=e[1]):t=e,t&&(r+=H(t)),n&&(r+=H(n,!0)),r=r.trim(),r===""?null:r}return String(a)}function B(a,e={},r,t){for(var n in r){var o=r[n];e[n]!==o&&(r[n]==null?a.style.removeProperty(n):a.style.setProperty(n,o,t))}}function Pa(a,e,r,t){var n=a.__style;if(T||n!==e){var o=Oa(e,t);(!T||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=e}else t&&(Array.isArray(t)?(B(a,r?.[0],t[0]),B(a,r?.[1],t[1],"important")):B(a,r,t));return t}function Na(a,e,r=e){var t=new WeakSet;_a(a,"input",async n=>{var o=n?a.defaultValue:a.value;if(o=F(a)?U(o):o,r(o),k!==null&&t.add(k),await ga(),o!==(o=e())){var b=a.selectionStart,f=a.selectionEnd,m=a.value.length;if(a.value=o??"",f!==null){var d=a.value.length;b===f&&f===m&&d>m?(a.selectionStart=d,a.selectionEnd=d):(a.selectionStart=b,a.selectionEnd=Math.min(f,d))}}}),(T&&a.defaultValue!==a.value||pa(e)==null&&a.value)&&(r(F(a)?U(a.value):a.value),k!==null&&t.add(k)),ka(()=>{var n=e();if(a===document.activeElement){var o=Ca??k;if(t.has(o))return}F(a)&&n===U(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function F(a){var e=a.type;return e==="number"||e==="range"}function U(a){return a===""?null:+a}const Va=async({params:a,parent:e})=>{const r=parseInt(a.index,10),t=await e(),{cardSeries:n}=t,o=n.cards[r],b=f=>async()=>{const m=await va("flashcards",1),d=da(m,"card",{transactionMode:"readwrite"}),M=f?ca:ia;return d.putObject(M(o))};return{backoffDbCard:b(!0),backonDbCard:b(!1),card:o,nextIndex:n.cards[r+1]!==void 0?r+1:null}},qa=!1,Ba=async()=>(await ua()).flatMap(({operator:a})=>Array.from({length:10},(e,r)=>({operator:a,index:r.toString()}))),ne=Object.freeze(Object.defineProperty({__proto__:null,entries:Ba,load:Va,ssr:qa},Symbol.toStringTag,{value:"Module"})),J=(a,e=Aa)=>{var r=Wa();let t;var n=x(r,!0);S(r),j(()=>{t=Pa(r,"",t,{color:e()?"green":"red"}),I(n,e()?"Correct!":"Incorrect!")}),v(a,r)},Fa=a=>{J(a,()=>!0)},Ua=a=>{J(a,()=>!1)};var Wa=g("<h4> </h4>"),za=g('<input class="answer svelte-71h7b8" type="number" min="0"/>'),La=g('<h2 class="answer svelte-71h7b8"> </h2>'),Xa=g('<button class="action svelte-71h7b8">Check</button>'),Ya=g('<button class="action svelte-71h7b8" type="submit"> </button>'),Ga=g('<!> <form class="card svelte-71h7b8"><h2 class="problem svelte-71h7b8"> </h2> <!> <!></form>',1);function oe(a,e){xa(e,!0);const r="card-answer",t=l(()=>e.params.index),n=l(()=>e.params.operator),o=l(()=>e.data.backoffDbCard),b=l(()=>e.data.backonDbCard),f=l(()=>e.data.card),m=l(()=>e.data.nextIndex),d=l(()=>c(f).question.type),M=l(()=>la(c(f))),W=l(()=>c(m)===null);let p=Y(0),u=Y(void 0);const K=()=>{w(u,c(M)(c(p)),!0),c(u)?c(o)():c(b)()},Q=A=>{A.preventDefault(),A.stopPropagation();const D=c(W)?G("/"):G("/[operator=operation]/[index=number]",{index:c(m).toString(),operator:c(n)});Ma(D)};Ta(()=>{w(p,0),w(u,void 0)});var z=V(),R=y(z);Ea(R,()=>c(t),A=>{var D=Ga(),L=y(D);{var Z=s=>{Fa(s)},$=s=>{var i=V(),h=y(i);{var P=_=>{Ua(_)};C(h,_=>{c(u)===!1&&_(P)},!0)}v(s,i)};C(L,s=>{c(u)?s(Z):s($,!1)})}var E=q(L,2),O=x(E),aa=x(O);S(O);var X=q(O,2);{var ea=s=>{var i=za();ja(i),Ia(i,"name",r),Na(i,()=>c(p),h=>w(p,h)),v(s,i)},ra=s=>{var i=V(),h=y(i);{var P=_=>{var N=La(),sa=x(N,!0);S(N),j(()=>I(sa,c(p))),v(_,N)};C(h,_=>{c(u)!==void 0&&_(P)},!0)}v(s,i)};C(X,s=>{c(d)==="free-input"&&c(u)===void 0?s(ea):s(ra,!1)})}var ta=q(X,2);{var na=s=>{var i=Xa();i.__click=K,v(s,i)},oa=s=>{var i=Ya(),h=x(i,!0);S(i),j(()=>I(h,c(W)?"Finish":"Next")),v(s,i)};C(ta,s=>{c(u)===void 0?s(na):s(oa,!1)})}S(E),j(s=>I(aa,`${s??""} =`),[()=>fa(c(f))]),ya("submit",E,Q),v(A,D)}),v(a,z),Sa()}Da(["click"]);export{oe as component,ne as universal};
