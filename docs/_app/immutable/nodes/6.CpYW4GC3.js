import{d as ca,e as fa,g as da,f as la}from"../chunks/BbA3lQ_k.js";import{g as va,a as ua}from"../chunks/ClbvkBdK.js";import{e as ma}from"../chunks/DKyf5C_J.js";import"../chunks/DsnmJJEf.js";import{aS as ba,w as ga,y as E,A as ha,aT as _a,O as k,ah as pa,d as ka,ay as xa,aU as Ca,p as Sa,av as N,k as I,a as l,l as ya,aV as M,aW as H,f as _,g as i,s as V,q as C,m as S,aX as d,t as O,o as Aa}from"../chunks/BVTbqmaX.js";import{d as Da,s as T,e as wa}from"../chunks/Cbh1IJjY.js";import{i as x}from"../chunks/BpsaAhsZ.js";import{B as ja}from"../chunks/BzDoDgrF.js";import{r as za,s as Ia}from"../chunks/CtQ5HOqi.js";import{r as J}from"../chunks/BzST9dp7.js";import{a as Ma,g as Oa}from"../chunks/BjhBxgpy.js";function Ta(a,e,r){E&&ha();var t=new ja(a),n=!ba();ga(()=>{var o=e();n&&o!==null&&typeof o=="object"&&(o={}),t.ensure(o,r)})}function K(a,e=!1){var r=e?" !important;":";",t="";for(var n in a){var o=a[n];o!=null&&o!==""&&(t+=" "+n+": "+o+r)}return t}function Ea(a,e){if(e){var r="",t,n;return Array.isArray(e)?(t=e[0],n=e[1]):t=e,t&&(r+=K(t)),n&&(r+=K(n,!0)),r=r.trim(),r===""?null:r}return String(a)}function B(a,e={},r,t){for(var n in r){var o=r[n];e[n]!==o&&(r[n]==null?a.style.removeProperty(n):a.style.setProperty(n,o,t))}}function y(a,e,r,t){var n=a.__style;if(E||n!==e){var o=Ea(e,t);(!E||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=e}else t&&(Array.isArray(t)?(B(a,r?.[0],t[0]),B(a,r?.[1],t[1],"important")):B(a,r,t));return t}function Pa(a,e,r=e){var t=new WeakSet;_a(a,"input",async n=>{var o=n?a.defaultValue:a.value;if(o=F(a)?U(o):o,r(o),k!==null&&t.add(k),await pa(),o!==(o=e())){var m=a.selectionStart,f=a.selectionEnd,b=a.value.length;if(a.value=o??"",f!==null){var v=a.value.length;m===f&&f===b&&v>b?(a.selectionStart=v,a.selectionEnd=v):(a.selectionStart=m,a.selectionEnd=Math.min(f,v))}}}),(E&&a.defaultValue!==a.value||ka(e)==null&&a.value)&&(r(F(a)?U(a.value):a.value),k!==null&&t.add(k)),xa(()=>{var n=e();if(a===document.activeElement){var o=Ca??k;if(t.has(o))return}F(a)&&n===U(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function F(a){var e=a.type;return e==="number"||e==="range"}function U(a){return a===""?null:+a}const qa=async({params:a,parent:e})=>{const r=parseInt(a.index,10),t=await e(),{cardSeries:n}=t,o=n.cards[r],m=f=>async()=>{const b=await va("flashcards",1),v=ua(b,"card",{transactionMode:"readwrite"}),P=f?ca:fa;return v.putObject(P(o))};return{backoffDbCard:m(!0),backonDbCard:m(!1),card:o,nextIndex:n.cards[r+1]!==void 0?r+1:null}},Na=!1,Va=async()=>(await ma()).flatMap(({operator:a})=>Array.from({length:10},(e,r)=>({operator:a,index:r.toString()}))),ne=Object.freeze(Object.defineProperty({__proto__:null,entries:Va,load:qa,ssr:Na},Symbol.toStringTag,{value:"Module"})),Q=(a,e=Aa)=>{var r=Ua();let t;var n=C(r,!0);S(r),O(()=>{t=y(r,"",t,{color:e()?"green":"red","font-size":"1.2rem","font-weight":"bold",margin:"0"}),T(n,e()?"Correct!":"Incorrect!")}),l(a,r)},Ba=a=>{Q(a,()=>!0)},Fa=a=>{Q(a,()=>!1)};var Ua=_("<h4> </h4>"),Wa=_('<input type="number" min="0"/>'),La=_("<h2> </h2>"),Xa=_("<button>Check</button>"),Ga=_('<button type="submit"> </button>'),Ha=_("<!> <form><h2> </h2> <!> <!></form>",1);function oe(a,e){Sa(e,!0);const r="card-answer",t=d(()=>e.params.index),n=d(()=>e.params.operator),o=d(()=>e.data.backoffDbCard),m=d(()=>e.data.backonDbCard),f=d(()=>e.data.card),b=d(()=>e.data.nextIndex),v=d(()=>i(f).question.type),P=d(()=>la(i(f))),W=d(()=>i(b)===null);let p=H(0),u=H(void 0);const R=()=>{M(u,i(P)(i(p)),!0),i(u)?i(o)():i(m)()},Y=A=>{A.preventDefault(),A.stopPropagation();const D=i(W)?J("/cards"):J("/cards/[operator=operation]/[index=number]",{index:i(b).toString(),operator:i(n)});Oa(D)};Ma(()=>{M(p,0),M(u,void 0)});var L=N(),Z=I(L);Ta(Z,()=>i(t),A=>{var D=Ha(),X=I(D);{var $=s=>{Ba(s)},aa=s=>{var c=N(),g=I(c);{var q=h=>{Fa(h)};x(g,h=>{i(u)===!1&&h(q)},!0)}l(s,c)};x(X,s=>{i(u)?s($):s(aa,!1)})}var w=V(X,2);y(w,"",{},{"align-items":"center","column-gap":"1rem",display:"flex"});var j=C(w);y(j,"",{},{"font-size":"1.5rem","line-height":"1"});var ea=C(j);S(j);var G=V(j,2);{var ra=s=>{var c=Wa();za(c),Ia(c,"name",r),y(c,"",{},{"box-sizing":"border-box","font-size":"1.25rem","line-height":"1",padding:"0.25rem"}),Pa(c,()=>i(p),g=>M(p,g)),l(s,c)},ta=s=>{var c=N(),g=I(c);{var q=h=>{var z=La();y(z,"",{},{"font-size":"1.5rem","line-height":"1"});var ia=C(z,!0);S(z),O(()=>T(ia,i(p))),l(h,z)};x(g,h=>{i(u)!==void 0&&h(q)},!0)}l(s,c)};x(G,s=>{i(v)==="free-input"&&i(u)===void 0?s(ra):s(ta,!1)})}var na=V(G,2);{var oa=s=>{var c=Xa();c.__click=R,l(s,c)},sa=s=>{var c=Ga(),g=C(c,!0);S(c),O(()=>T(g,i(W)?"Finish":"Next")),l(s,c)};x(na,s=>{i(u)===void 0?s(oa):s(sa,!1)})}S(w),O(s=>T(ea,`${s??""} =`),[()=>da(i(f))]),wa("submit",w,Y),l(A,D)}),l(a,L),ya()}Da(["click"]);export{oe as component,ne as universal};
