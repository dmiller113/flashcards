import{d as fa,e as ca,g as da,f as la}from"../chunks/BbA3lQ_k.js";import{g as va,a as ua}from"../chunks/ClbvkBdK.js";import{e as ma}from"../chunks/DKyf5C_J.js";import"../chunks/DsnmJJEf.js";import{aT as ba,h as ga,j as O,l as ha,aU as _a,B as k,aa as pa,a1 as ka,aw as xa,aV as Ca,p as Sa,as as N,a as I,b as l,c as ya,aW as M,aX as G,f as _,g as i,s as V,d as C,r as S,aY as d,t as T,n as Aa}from"../chunks/Bnpgr9A_.js";import{d as Da,s as E,e as ja}from"../chunks/BT6QaMR_.js";import{i as x}from"../chunks/C_KVKIkz.js";import{B as wa}from"../chunks/DNq23BFD.js";import{r as za,s as Ia}from"../chunks/B3DnBngh.js";import{r as H}from"../chunks/B1pemQyn.js";import{a as Ma,g as Ta}from"../chunks/Do6reSJO.js";function Ea(a,e,r){O&&ha();var t=new wa(a),n=!ba();ga(()=>{var o=e();n&&o!==null&&typeof o=="object"&&(o={}),t.ensure(o,r)})}function J(a,e=!1){var r=e?" !important;":";",t="";for(var n in a){var o=a[n];o!=null&&o!==""&&(t+=" "+n+": "+o+r)}return t}function Oa(a,e){if(e){var r="",t,n;return Array.isArray(e)?(t=e[0],n=e[1]):t=e,t&&(r+=J(t)),n&&(r+=J(n,!0)),r=r.trim(),r===""?null:r}return String(a)}function q(a,e={},r,t){for(var n in r){var o=r[n];e[n]!==o&&(r[n]==null?a.style.removeProperty(n):a.style.setProperty(n,o,t))}}function y(a,e,r,t){var n=a.__style;if(O||n!==e){var o=Oa(e,t);(!O||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=e}else t&&(Array.isArray(t)?(q(a,r?.[0],t[0]),q(a,r?.[1],t[1],"important")):q(a,r,t));return t}function Pa(a,e,r=e){var t=new WeakSet;_a(a,"input",async n=>{var o=n?a.defaultValue:a.value;if(o=F(a)?U(o):o,r(o),k!==null&&t.add(k),await pa(),o!==(o=e())){var m=a.selectionStart,c=a.selectionEnd,b=a.value.length;if(a.value=o??"",c!==null){var v=a.value.length;m===c&&c===b&&v>b?(a.selectionStart=v,a.selectionEnd=v):(a.selectionStart=m,a.selectionEnd=Math.min(c,v))}}}),(O&&a.defaultValue!==a.value||ka(e)==null&&a.value)&&(r(F(a)?U(a.value):a.value),k!==null&&t.add(k)),xa(()=>{var n=e();if(a===document.activeElement){var o=Ca??k;if(t.has(o))return}F(a)&&n===U(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function F(a){var e=a.type;return e==="number"||e==="range"}function U(a){return a===""?null:+a}const Ba=async({params:a,parent:e})=>{const r=parseInt(a.index,10),t=await e(),{cardSeries:n}=t,o=n.cards[r],m=c=>async()=>{const b=await va("flashcards",1),v=ua(b,"card",{transactionMode:"readwrite"}),P=c?fa:ca;return v.putObject(P(o))};return{backoffDbCard:m(!0),backonDbCard:m(!1),card:o,nextIndex:n.cards[r+1]!==void 0?r+1:null}},Na=!1,Va=async()=>(await ma()).flatMap(({operator:a})=>Array.from({length:10},(e,r)=>({operator:a,index:r.toString()}))),ne=Object.freeze(Object.defineProperty({__proto__:null,entries:Va,load:Ba,ssr:Na},Symbol.toStringTag,{value:"Module"})),K=(a,e=Aa)=>{var r=Ua();let t;var n=C(r,!0);S(r),T(()=>{t=y(r,"",t,{color:e()?"green":"red","font-size":"1.2rem","font-weight":"bold",margin:"0"}),E(n,e()?"Correct!":"Incorrect!")}),l(a,r)},qa=a=>{K(a,()=>!0)},Fa=a=>{K(a,()=>!1)};var Ua=_("<h4> </h4>"),Wa=_('<input type="number" min="0"/>'),La=_("<h2> </h2>"),Xa=_("<button>Check</button>"),Ya=_('<button type="submit"> </button>'),Ga=_("<!> <form><h2> </h2> <!> <!></form>",1);function oe(a,e){Sa(e,!0);const r="card-answer",t=d(()=>e.params.index),n=d(()=>e.params.operator),o=d(()=>e.data.backoffDbCard),m=d(()=>e.data.backonDbCard),c=d(()=>e.data.card),b=d(()=>e.data.nextIndex),v=d(()=>i(c).question.type),P=d(()=>la(i(c))),W=d(()=>i(b)===null);let p=G(0),u=G(void 0);const Q=()=>{M(u,i(P)(i(p)),!0),i(u)?i(o)():i(m)()},R=A=>{A.preventDefault(),A.stopPropagation();const D=i(W)?H("/"):H("/[operator=operation]/[index=number]",{index:i(b).toString(),operator:i(n)});Ta(D)};Ma(()=>{M(p,0),M(u,void 0)});var L=N(),Z=I(L);Ea(Z,()=>i(t),A=>{var D=Ga(),X=I(D);{var $=s=>{qa(s)},aa=s=>{var f=N(),g=I(f);{var B=h=>{Fa(h)};x(g,h=>{i(u)===!1&&h(B)},!0)}l(s,f)};x(X,s=>{i(u)?s($):s(aa,!1)})}var j=V(X,2);y(j,"",{},{"align-items":"center","column-gap":"1rem",display:"flex"});var w=C(j);y(w,"",{},{"font-size":"1.5rem","line-height":"1"});var ea=C(w);S(w);var Y=V(w,2);{var ra=s=>{var f=Wa();za(f),Ia(f,"name",r),y(f,"",{},{"box-sizing":"border-box","font-size":"1.25rem","line-height":"1",padding:"0.25rem"}),Pa(f,()=>i(p),g=>M(p,g)),l(s,f)},ta=s=>{var f=N(),g=I(f);{var B=h=>{var z=La();y(z,"",{},{"font-size":"1.5rem","line-height":"1"});var ia=C(z,!0);S(z),T(()=>E(ia,i(p))),l(h,z)};x(g,h=>{i(u)!==void 0&&h(B)},!0)}l(s,f)};x(Y,s=>{i(v)==="free-input"&&i(u)===void 0?s(ra):s(ta,!1)})}var na=V(Y,2);{var oa=s=>{var f=Xa();f.__click=Q,l(s,f)},sa=s=>{var f=Ya(),g=C(f,!0);S(f),T(()=>E(g,i(W)?"Finish":"Next")),l(s,f)};x(na,s=>{i(u)===void 0?s(oa):s(sa,!1)})}S(j),T(s=>E(ea,`${s??""} =`),[()=>da(i(c))]),ja("submit",j,R),l(A,D)}),l(a,L),ya()}Da(["click"]);export{oe as component,ne as universal};
