import{d as ca,e as fa,g as da,f as la}from"../chunks/BbA3lQ_k.js";import{g as va,a as ua}from"../chunks/ClbvkBdK.js";import{e as ma}from"../chunks/DKyf5C_J.js";import"../chunks/DsnmJJEf.js";import{aT as ba,h as ga,j as O,l as ha,aU as _a,B as k,aa as pa,a1 as ka,aw as xa,aV as Ca,p as Sa,as as N,a as I,b as l,c as ya,aW as M,aX as G,f as _,g as i,s as V,d as C,r as S,aY as d,t as T,n as Aa}from"../chunks/Bnpgr9A_.js";import{d as Da,s as E,e as ja}from"../chunks/BT6QaMR_.js";import{i as x}from"../chunks/C_KVKIkz.js";import{B as wa}from"../chunks/DNq23BFD.js";import{r as za,s as Ia}from"../chunks/B3DnBngh.js";import{r as H}from"../chunks/DXZm_4oK.js";import{a as Ma,g as Ta}from"../chunks/DDDwmfAr.js";function Ea(a,r,e){O&&ha();var t=new wa(a),n=!ba();ga(()=>{var o=r();n&&o!==null&&typeof o=="object"&&(o={}),t.ensure(o,e)})}function J(a,r=!1){var e=r?" !important;":";",t="";for(var n in a){var o=a[n];o!=null&&o!==""&&(t+=" "+n+": "+o+e)}return t}function Oa(a,r){if(r){var e="",t,n;return Array.isArray(r)?(t=r[0],n=r[1]):t=r,t&&(e+=J(t)),n&&(e+=J(n,!0)),e=e.trim(),e===""?null:e}return String(a)}function q(a,r={},e,t){for(var n in e){var o=e[n];r[n]!==o&&(e[n]==null?a.style.removeProperty(n):a.style.setProperty(n,o,t))}}function y(a,r,e,t){var n=a.__style;if(O||n!==r){var o=Oa(r,t);(!O||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=r}else t&&(Array.isArray(t)?(q(a,e?.[0],t[0]),q(a,e?.[1],t[1],"important")):q(a,e,t));return t}function Pa(a,r,e=r){var t=new WeakSet;_a(a,"input",async n=>{var o=n?a.defaultValue:a.value;if(o=F(a)?U(o):o,e(o),k!==null&&t.add(k),await pa(),o!==(o=r())){var m=a.selectionStart,f=a.selectionEnd,b=a.value.length;if(a.value=o??"",f!==null){var v=a.value.length;m===f&&f===b&&v>b?(a.selectionStart=v,a.selectionEnd=v):(a.selectionStart=m,a.selectionEnd=Math.min(f,v))}}}),(O&&a.defaultValue!==a.value||ka(r)==null&&a.value)&&(e(F(a)?U(a.value):a.value),k!==null&&t.add(k)),xa(()=>{var n=r();if(a===document.activeElement){var o=Ca??k;if(t.has(o))return}F(a)&&n===U(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function F(a){var r=a.type;return r==="number"||r==="range"}function U(a){return a===""?null:+a}const Ba=async({params:a,parent:r})=>{const e=parseInt(a.index,10),t=await r(),{cardSeries:n}=t,o=n.cards[e],m=f=>async()=>{const b=await va("flashcards",1),v=ua(b,"card",{transactionMode:"readwrite"}),P=f?ca:fa;return v.putObject(P(o))};return{backoffDbCard:m(!0),backonDbCard:m(!1),card:o,nextIndex:n.cards[e+1]!==void 0?e+1:null}},Na=!1,Va=async()=>(await ma()).flatMap(({operator:a})=>Array.from({length:10},(r,e)=>({operator:a,index:e.toString()}))),nr=Object.freeze(Object.defineProperty({__proto__:null,entries:Va,load:Ba,ssr:Na},Symbol.toStringTag,{value:"Module"})),K=(a,r=Aa)=>{var e=Ua();let t;var n=C(e,!0);S(e),T(()=>{t=y(e,"",t,{color:r()?"green":"red","font-size":"1.2rem","font-weight":"bold",margin:"0"}),E(n,r()?"Correct!":"Incorrect!")}),l(a,e)},qa=a=>{K(a,()=>!0)},Fa=a=>{K(a,()=>!1)};var Ua=_("<h4> </h4>"),Wa=_('<input type="number" min="0"/>'),La=_("<h2> </h2>"),Xa=_("<button>Check</button>"),Ya=_('<button type="submit"> </button>'),Ga=_("<!> <form><h2> </h2> <!> <!></form>",1);function or(a,r){Sa(r,!0);const e="card-answer",t=d(()=>r.params.index),n=d(()=>r.params.operator),o=d(()=>r.data.backoffDbCard),m=d(()=>r.data.backonDbCard),f=d(()=>r.data.card),b=d(()=>r.data.nextIndex),v=d(()=>i(f).question.type),P=d(()=>la(i(f))),W=d(()=>i(b)===null);let p=G(0),u=G(void 0);const Q=()=>{M(u,i(P)(i(p)),!0),i(u)?i(o)():i(m)()},R=A=>{A.preventDefault(),A.stopPropagation();const D=i(W)?H("/cards"):H("/cards/[operator=operation]/[index=number]",{index:i(b).toString(),operator:i(n)});Ta(D)};Ma(()=>{M(p,0),M(u,void 0)});var L=N(),Z=I(L);Ea(Z,()=>i(t),A=>{var D=Ga(),X=I(D);{var $=s=>{qa(s)},aa=s=>{var c=N(),g=I(c);{var B=h=>{Fa(h)};x(g,h=>{i(u)===!1&&h(B)},!0)}l(s,c)};x(X,s=>{i(u)?s($):s(aa,!1)})}var j=V(X,2);y(j,"",{},{"align-items":"center","column-gap":"1rem",display:"flex"});var w=C(j);y(w,"",{},{"font-size":"1.5rem","line-height":"1"});var ra=C(w);S(w);var Y=V(w,2);{var ea=s=>{var c=Wa();za(c),Ia(c,"name",e),y(c,"",{},{"box-sizing":"border-box","font-size":"1.25rem","line-height":"1",padding:"0.25rem"}),Pa(c,()=>i(p),g=>M(p,g)),l(s,c)},ta=s=>{var c=N(),g=I(c);{var B=h=>{var z=La();y(z,"",{},{"font-size":"1.5rem","line-height":"1"});var ia=C(z,!0);S(z),T(()=>E(ia,i(p))),l(h,z)};x(g,h=>{i(u)!==void 0&&h(B)},!0)}l(s,c)};x(Y,s=>{i(v)==="free-input"&&i(u)===void 0?s(ea):s(ta,!1)})}var na=V(Y,2);{var oa=s=>{var c=Xa();c.__click=Q,l(s,c)},sa=s=>{var c=Ya(),g=C(c,!0);S(c),T(()=>E(g,i(W)?"Finish":"Next")),l(s,c)};x(na,s=>{i(u)===void 0?s(oa):s(sa,!1)})}S(j),T(s=>E(ra,`${s??""} =`),[()=>da(i(f))]),ja("submit",j,R),l(A,D)}),l(a,L),ya()}Da(["click"]);export{or as component,nr as universal};
