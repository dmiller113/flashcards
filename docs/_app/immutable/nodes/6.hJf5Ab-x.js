import{d as ca,e as fa,g as da,f as la}from"../chunks/BbA3lQ_k.js";import{g as va,a as ua}from"../chunks/ClbvkBdK.js";import{e as ba}from"../chunks/DKyf5C_J.js";import"../chunks/DsnmJJEf.js";import{aS as ma,j as _a,l as O,o as ga,aT as ha,F as k,ac as pa,a3 as ka,ay as xa,aU as Ca,p as Sa,aq as F,b as I,a as l,c as ya,aV as M,aW as H,f as h,h as i,s as N,g as C,r as S,aX as d,t as T,d as Aa}from"../chunks/DFSK7Ysn.js";import{d as Da,s as E,e as ja}from"../chunks/tEAfR29Z.js";import{i as x}from"../chunks/MRv0hfQY.js";import{B as wa}from"../chunks/PLY1Mbwe.js";import{r as za,s as Ia}from"../chunks/BcvyXxVC.js";import{b as Ma,r as Ta,a as Ea,g as Oa}from"../chunks/DQcgoqM5.js";function Pa(a,e,r){O&&ga();var t=new wa(a),n=!ma();_a(()=>{var o=e();n&&o!==null&&typeof o=="object"&&(o={}),t.ensure(o,r)})}function J(a,e=!1){var r=e?" !important;":";",t="";for(var n in a){var o=a[n];o!=null&&o!==""&&(t+=" "+n+": "+o+r)}return t}function qa(a,e){if(e){var r="",t,n;return Array.isArray(e)?(t=e[0],n=e[1]):t=e,t&&(r+=J(t)),n&&(r+=J(n,!0)),r=r.trim(),r===""?null:r}return String(a)}function V(a,e={},r,t){for(var n in r){var o=r[n];e[n]!==o&&(r[n]==null?a.style.removeProperty(n):a.style.setProperty(n,o,t))}}function y(a,e,r,t){var n=a.__style;if(O||n!==e){var o=qa(e,t);(!O||o!==a.getAttribute("style"))&&(o==null?a.removeAttribute("style"):a.style.cssText=o),a.__style=e}else t&&(Array.isArray(t)?(V(a,r?.[0],t[0]),V(a,r?.[1],t[1],"important")):V(a,r,t));return t}function Fa(a,e,r=e){var t=new WeakSet;ha(a,"input",async n=>{var o=n?a.defaultValue:a.value;if(o=B(a)?U(o):o,r(o),k!==null&&t.add(k),await pa(),o!==(o=e())){var b=a.selectionStart,f=a.selectionEnd,m=a.value.length;if(a.value=o??"",f!==null){var v=a.value.length;b===f&&f===m&&v>m?(a.selectionStart=v,a.selectionEnd=v):(a.selectionStart=b,a.selectionEnd=Math.min(f,v))}}}),(O&&a.defaultValue!==a.value||ka(e)==null&&a.value)&&(r(B(a)?U(a.value):a.value),k!==null&&t.add(k)),xa(()=>{var n=e();if(a===document.activeElement){var o=Ca??k;if(t.has(o))return}B(a)&&n===U(a.value)||a.type==="date"&&!n&&!a.value||n!==a.value&&(a.value=n??"")})}function B(a){var e=a.type;return e==="number"||e==="range"}function U(a){return a===""?null:+a}function K(...a){return Ma+Ta(a[0],a[1])}const Na=async({params:a,parent:e})=>{const r=parseInt(a.index,10),t=await e(),{cardSeries:n}=t,o=n.cards[r],b=f=>async()=>{const m=await va("flashcards",1),v=ua(m,"card",{transactionMode:"readwrite"}),P=f?ca:fa;return v.putObject(P(o))};return{backoffDbCard:b(!0),backonDbCard:b(!1),card:o,nextIndex:n.cards[r+1]!==void 0?r+1:null}},Va=!1,Ba=async()=>(await ba()).flatMap(({operator:a})=>Array.from({length:10},(e,r)=>({operator:a,index:r.toString()}))),oe=Object.freeze(Object.defineProperty({__proto__:null,entries:Ba,load:Na,ssr:Va},Symbol.toStringTag,{value:"Module"})),Q=(a,e=Aa)=>{var r=La();let t;var n=C(r,!0);S(r),T(()=>{t=y(r,"",t,{color:e()?"green":"red","font-size":"1.2rem","font-weight":"bold",margin:"0"}),E(n,e()?"Correct!":"Incorrect!")}),l(a,r)},Ua=a=>{Q(a,()=>!0)},Wa=a=>{Q(a,()=>!1)};var La=h("<h4> </h4>"),Xa=h('<input type="number" min="0"/>'),Ga=h("<h2> </h2>"),Ha=h("<button>Check</button>"),Ja=h('<button type="submit"> </button>'),Ka=h("<!> <form><h2> </h2> <!> <!></form>",1);function se(a,e){Sa(e,!0);const r="card-answer",t=d(()=>e.params.index),n=d(()=>e.params.operator),o=d(()=>e.data.backoffDbCard),b=d(()=>e.data.backonDbCard),f=d(()=>e.data.card),m=d(()=>e.data.nextIndex),v=d(()=>i(f).question.type),P=d(()=>la(i(f))),W=d(()=>i(m)===null);let p=H(0),u=H(void 0);const R=()=>{M(u,i(P)(i(p)),!0),i(u)?i(o)():i(b)()},Y=A=>{A.preventDefault(),A.stopPropagation();const D=i(W)?K("/cards"):K("/cards/[operator=operation]/[index=number]",{index:i(m).toString(),operator:i(n)});Oa(D)};Ea(()=>{M(p,0),M(u,void 0)});var L=F(),Z=I(L);Pa(Z,()=>i(t),A=>{var D=Ka(),X=I(D);{var $=s=>{Ua(s)},aa=s=>{var c=F(),_=I(c);{var q=g=>{Wa(g)};x(_,g=>{i(u)===!1&&g(q)},!0)}l(s,c)};x(X,s=>{i(u)?s($):s(aa,!1)})}var j=N(X,2);y(j,"",{},{"align-items":"center","column-gap":"1rem",display:"flex"});var w=C(j);y(w,"",{},{"font-size":"1.5rem","line-height":"1"});var ea=C(w);S(w);var G=N(w,2);{var ra=s=>{var c=Xa();za(c),Ia(c,"name",r),y(c,"",{},{"box-sizing":"border-box","font-size":"1.25rem","line-height":"1",padding:"0.25rem"}),Fa(c,()=>i(p),_=>M(p,_)),l(s,c)},ta=s=>{var c=F(),_=I(c);{var q=g=>{var z=Ga();y(z,"",{},{"font-size":"1.5rem","line-height":"1"});var ia=C(z,!0);S(z),T(()=>E(ia,i(p))),l(g,z)};x(_,g=>{i(u)!==void 0&&g(q)},!0)}l(s,c)};x(G,s=>{i(v)==="free-input"&&i(u)===void 0?s(ra):s(ta,!1)})}var na=N(G,2);{var oa=s=>{var c=Ha();c.__click=R,l(s,c)},sa=s=>{var c=Ja(),_=C(c,!0);S(c),T(()=>E(_,i(W)?"Finish":"Next")),l(s,c)};x(na,s=>{i(u)===void 0?s(oa):s(sa,!1)})}S(j),T(s=>E(ea,`${s??""} =`),[()=>da(i(f))]),ja("submit",j,Y),l(A,D)}),l(a,L),ya()}Da(["click"]);export{se as component,oe as universal};
